{"version":3,"file":"commonHelpers.js","sources":["../src/js/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n\nconst form = document.getElementById('search-form');\nconst gallery = document.getElementById('gallery');\nconst loadMoreButton = document.getElementById('load-more');\n\nlet page = 1;\nlet currentQuery = '';\nconst perPage = 40;\nconst apiKey = '44455355-2a7bcc134ac57944b610f09f9';\nconst baseUrl = 'https://pixabay.com/api/';\nlet lightbox = new SimpleLightbox('.gallery a');\n\nconst fetchImages = async (query, page) => {\n  try {\n    const response = await axios.get(baseUrl, {\n      params: {\n        key: apiKey,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: perPage,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    iziToast.show({\n      title: 'Error',\n      message: 'Failed to fetch images. Please try again later.',\n      position: 'topRight',\n      backgroundColor: 'lightcoral',\n      color: 'white',\n    });\n    throw error;\n  }\n};\n\nconst renderImages = images => {\n  const markup = images\n    .map(\n      image => `\n    <a href=\"${image.largeImageURL}\" class=\"photo-card\">\n      <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n      <div class=\"info\">\n        <p class=\"info-item\"><b>Likes:</b> ${image.likes}</p>\n        <p class=\"info-item\"><b>Views:</b> ${image.views}</p>\n        <p class=\"info-item\"><b>Comments:</b> ${image.comments}</p>\n        <p class=\"info-item\"><b>Downloads:</b> ${image.downloads}</p>\n      </div>\n    </a>\n  `\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  lightbox.refresh();\n};\n\nconst clearGallery = () => {\n  gallery.innerHTML = '';\n};\n\nconst handleSearch = async event => {\n  event.preventDefault();\n  const queryInput = form.searchQuery.value.trim();\n\n  if (!queryInput) {\n    iziToast.show({\n      title: 'Error',\n      message: 'Please enter a search query.',\n      position: 'topRight',\n      backgroundColor: 'lightcoral',\n      color: 'white',\n    });\n    return;\n  }\n\n  currentQuery = queryInput;\n  page = 1;\n  clearGallery();\n  loadMoreButton.style.display = 'none';\n\n  try {\n    const data = await fetchImages(currentQuery, page);\n    if (data.hits.length === 0) {\n      iziToast.show({\n        title: 'Error',\n        message: `No images found for \"${currentQuery}\". Please try again.`,\n        position: 'topRight',\n        backgroundColor: 'lightcoral',\n        color: 'white',\n      });\n      return;\n    }\n    renderImages(data.hits);\n    iziToast.show({\n      title: 'Success',\n      message: `Found ${data.totalHits} images for \"${currentQuery}\".`,\n      position: 'topRight',\n      backgroundColor: 'lightgreen',\n      color: 'white',\n    });\n\n    if (data.hits.length === perPage) {\n      loadMoreButton.style.display = 'block';\n    }\n  } catch (error) {\n    console.error('Error fetching images:', error);\n  }\n};\n\nconst loadMoreImages = async () => {\n  page += 1;\n\n  try {\n    const data = await fetchImages(currentQuery, page);\n    renderImages(data.hits);\n\n    if (page * perPage >= data.totalHits) {\n      loadMoreButton.style.display = 'none';\n      iziToast.show({\n        title: 'Info',\n        message: \"You've reached the end of search results.\",\n        position: 'topRight',\n        backgroundColor: 'lightcoral',\n        color: 'white',\n      });\n    }\n  } catch (error) {\n    console.error('Error fetching more images:', error);\n    iziToast.show({\n      title: 'Error',\n      message: 'Failed to fetch more images. Please try again later.',\n      position: 'topRight',\n      backgroundColor: 'lightcoral',\n      color: 'white',\n    });\n  }\n};\n\nform.addEventListener('submit', handleSearch);\nloadMoreButton.addEventListener('click', loadMoreImages);\n"],"names":["form","gallery","loadMoreButton","page","currentQuery","perPage","apiKey","baseUrl","lightbox","SimpleLightbox","fetchImages","query","axios","error","iziToast","renderImages","images","markup","image","clearGallery","handleSearch","event","queryInput","data","loadMoreImages"],"mappings":"owBAMA,MAAMA,EAAO,SAAS,eAAe,aAAa,EAC5CC,EAAU,SAAS,eAAe,SAAS,EAC3CC,EAAiB,SAAS,eAAe,WAAW,EAE1D,IAAIC,EAAO,EACPC,EAAe,GACnB,MAAMC,EAAU,GACVC,EAAS,qCACTC,EAAU,2BAChB,IAAIC,EAAW,IAAIC,EAAe,YAAY,EAE9C,MAAMC,EAAc,MAAOC,EAAOR,IAAS,CACzC,GAAI,CAYF,OAXiB,MAAMS,EAAM,IAAIL,EAAS,CACxC,OAAQ,CACN,IAAKD,EACL,EAAGK,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMR,EACN,SAAUE,CACX,CACP,CAAK,GACe,IACjB,OAAQQ,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EAC7CC,EAAS,KAAK,CACZ,MAAO,QACP,QAAS,kDACT,SAAU,WACV,gBAAiB,aACjB,MAAO,OACb,CAAK,EACKD,CACP,CACH,EAEME,EAAeC,GAAU,CAC7B,MAAMC,EAASD,EACZ,IACCE,GAAS;AAAA,eACAA,EAAM,aAAa;AAAA,kBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,6CAEXA,EAAM,KAAK;AAAA,6CACXA,EAAM,KAAK;AAAA,gDACRA,EAAM,QAAQ;AAAA,iDACbA,EAAM,SAAS;AAAA;AAAA;AAAA,GAI3D,EACA,KAAK,EAAE,EACVjB,EAAQ,mBAAmB,YAAagB,CAAM,EAE9CT,EAAS,QAAO,CAClB,EAEMW,EAAe,IAAM,CACzBlB,EAAQ,UAAY,EACtB,EAEMmB,EAAe,MAAMC,GAAS,CAClCA,EAAM,eAAc,EACpB,MAAMC,EAAatB,EAAK,YAAY,MAAM,KAAI,EAE9C,GAAI,CAACsB,EAAY,CACfR,EAAS,KAAK,CACZ,MAAO,QACP,QAAS,+BACT,SAAU,WACV,gBAAiB,aACjB,MAAO,OACb,CAAK,EACD,MACD,CAEDV,EAAekB,EACfnB,EAAO,EACPgB,IACAjB,EAAe,MAAM,QAAU,OAE/B,GAAI,CACF,MAAMqB,EAAO,MAAMb,EAAYN,EAAcD,CAAI,EACjD,GAAIoB,EAAK,KAAK,SAAW,EAAG,CAC1BT,EAAS,KAAK,CACZ,MAAO,QACP,QAAS,wBAAwBV,CAAY,uBAC7C,SAAU,WACV,gBAAiB,aACjB,MAAO,OACf,CAAO,EACD,MACD,CACDW,EAAaQ,EAAK,IAAI,EACtBT,EAAS,KAAK,CACZ,MAAO,UACP,QAAS,SAASS,EAAK,SAAS,gBAAgBnB,CAAY,KAC5D,SAAU,WACV,gBAAiB,aACjB,MAAO,OACb,CAAK,EAEGmB,EAAK,KAAK,SAAWlB,IACvBH,EAAe,MAAM,QAAU,QAElC,OAAQW,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,CAC9C,CACH,EAEMW,EAAiB,SAAY,CACjCrB,GAAQ,EAER,GAAI,CACF,MAAMoB,EAAO,MAAMb,EAAYN,EAAcD,CAAI,EACjDY,EAAaQ,EAAK,IAAI,EAElBpB,EAAOE,GAAWkB,EAAK,YACzBrB,EAAe,MAAM,QAAU,OAC/BY,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,4CACT,SAAU,WACV,gBAAiB,aACjB,MAAO,OACf,CAAO,EAEJ,OAAQD,EAAO,CACd,QAAQ,MAAM,8BAA+BA,CAAK,EAClDC,EAAS,KAAK,CACZ,MAAO,QACP,QAAS,uDACT,SAAU,WACV,gBAAiB,aACjB,MAAO,OACb,CAAK,CACF,CACH,EAEAd,EAAK,iBAAiB,SAAUoB,CAAY,EAC5ClB,EAAe,iBAAiB,QAASsB,CAAc"}