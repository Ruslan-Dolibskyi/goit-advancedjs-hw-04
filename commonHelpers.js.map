{"version":3,"file":"commonHelpers.js","sources":["../src/js/main.js"],"sourcesContent":["// scripts.js\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const form = document.getElementById('search-form');\n  const searchInput = form.querySelector('input[name=\"searchQuery\"]');\n  const searchButton = form.querySelector('button[type=\"submit\"]');\n  const gallery = document.getElementById('gallery');\n  const loadMoreButton = document.getElementById('load-more');\n  let page = 1;\n  let currentQuery = '';\n  let lightbox;\n\n  // Деактивуємо кнопку пошуку, якщо інпут порожній\n  searchInput.addEventListener('input', () => {\n    if (searchInput.value.trim() === '') {\n      searchButton.disabled = true;\n    } else {\n      searchButton.disabled = false;\n    }\n  });\n\n  // Перевірка на початковий стан інпуту\n  if (searchInput.value.trim() === '') {\n    searchButton.disabled = true;\n  }\n\n  form.addEventListener('submit', async event => {\n    event.preventDefault();\n    page = 1;\n    gallery.innerHTML = '';\n    currentQuery = searchInput.value.trim();\n    await fetchImages();\n  });\n\n  loadMoreButton.addEventListener('click', fetchImages);\n\n  async function fetchImages() {\n    const apiKey = '44455355-2a7bcc134ac57944b610f09f9';\n    const query = encodeURIComponent(currentQuery);\n    const url = `https://pixabay.com/api/?key=${apiKey}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=40`;\n\n    try {\n      const response = await fetch(url);\n      const data = await response.json();\n\n      if (page === 1 && data.totalHits > 0) {\n        iziToast.show({\n          message: `Hooray! We found ${data.totalHits} images.`,\n          position: 'topRight',\n          backgroundColor: 'lightgreen',\n          color: 'white',\n        });\n      }\n\n      if (data.hits.length === 0) {\n        iziToast.show({\n          message:\n            'Sorry, there are no images matching your search query. Please try again.',\n          position: 'topRight',\n          backgroundColor: 'lightcoral',\n          color: 'white',\n        });\n        loadMoreButton.style.display = 'none';\n        return;\n      }\n\n      data.hits.forEach(image => {\n        const photoCard = document.createElement('a');\n        photoCard.href = image.largeImageURL;\n        photoCard.className = 'photo-card';\n        photoCard.innerHTML = `\n                    <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n                    <div class=\"info\">\n                        <p class=\"info-item\"><b>Likes</b> ${image.likes}</p>\n                        <p class=\"info-item\"><b>Views</b> ${image.views}</p>\n                        <p class=\"info-item\"><b>Comments</b> ${image.comments}</p>\n                        <p class=\"info-item\"><b>Downloads</b> ${image.downloads}</p>\n                    </div>\n                `;\n        gallery.appendChild(photoCard);\n      });\n\n      page += 1;\n      loadMoreButton.style.display = 'block';\n\n      if (!lightbox) {\n        lightbox = new SimpleLightbox('.gallery a');\n      } else {\n        lightbox.refresh();\n      }\n\n      if (data.totalHits <= page * 40) {\n        loadMoreButton.style.display = 'none';\n        iziToast.show({\n          message: \"We're sorry, but you've reached the end of search results.\",\n          position: 'topRight',\n          backgroundColor: 'lightcoral',\n          color: 'white',\n        });\n      }\n    } catch (error) {\n      console.error('Error fetching images:', error);\n      iziToast.show({\n        message:\n          'An error occurred while fetching images. Please try again later.',\n        position: 'topRight',\n        backgroundColor: 'lightcoral',\n        color: 'white',\n      });\n    }\n  }\n});\n"],"names":["form","searchInput","searchButton","gallery","loadMoreButton","page","currentQuery","lightbox","event","fetchImages","apiKey","query","url","data","iziToast","image","photoCard","SimpleLightbox","error"],"mappings":"6vBAMA,SAAS,iBAAiB,mBAAoB,IAAM,CAClD,MAAMA,EAAO,SAAS,eAAe,aAAa,EAC5CC,EAAcD,EAAK,cAAc,2BAA2B,EAC5DE,EAAeF,EAAK,cAAc,uBAAuB,EACzDG,EAAU,SAAS,eAAe,SAAS,EAC3CC,EAAiB,SAAS,eAAe,WAAW,EAC1D,IAAIC,EAAO,EACPC,EAAe,GACfC,EAGJN,EAAY,iBAAiB,QAAS,IAAM,CACtCA,EAAY,MAAM,KAAI,IAAO,GAC/BC,EAAa,SAAW,GAExBA,EAAa,SAAW,EAE9B,CAAG,EAGGD,EAAY,MAAM,KAAI,IAAO,KAC/BC,EAAa,SAAW,IAG1BF,EAAK,iBAAiB,SAAU,MAAMQ,GAAS,CAC7CA,EAAM,eAAc,EACpBH,EAAO,EACPF,EAAQ,UAAY,GACpBG,EAAeL,EAAY,MAAM,OACjC,MAAMQ,EAAW,CACrB,CAAG,EAEDL,EAAe,iBAAiB,QAASK,CAAW,EAEpD,eAAeA,GAAc,CAC3B,MAAMC,EAAS,qCACTC,EAAQ,mBAAmBL,CAAY,EACvCM,EAAM,gCAAgCF,CAAM,MAAMC,CAAK,iEAAiEN,CAAI,eAElI,GAAI,CAEF,MAAMQ,EAAO,MADI,MAAM,MAAMD,CAAG,GACJ,OAW5B,GATIP,IAAS,GAAKQ,EAAK,UAAY,GACjCC,EAAS,KAAK,CACZ,QAAS,oBAAoBD,EAAK,SAAS,WAC3C,SAAU,WACV,gBAAiB,aACjB,MAAO,OACjB,CAAS,EAGCA,EAAK,KAAK,SAAW,EAAG,CAC1BC,EAAS,KAAK,CACZ,QACE,2EACF,SAAU,WACV,gBAAiB,aACjB,MAAO,OACjB,CAAS,EACDV,EAAe,MAAM,QAAU,OAC/B,MACD,CAEDS,EAAK,KAAK,QAAQE,GAAS,CACzB,MAAMC,EAAY,SAAS,cAAc,GAAG,EAC5CA,EAAU,KAAOD,EAAM,cACvBC,EAAU,UAAY,aACtBA,EAAU,UAAY;AAAA,gCACED,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,4DAEVA,EAAM,KAAK;AAAA,4DACXA,EAAM,KAAK;AAAA,+DACRA,EAAM,QAAQ;AAAA,gEACbA,EAAM,SAAS;AAAA;AAAA,kBAGvEZ,EAAQ,YAAYa,CAAS,CACrC,CAAO,EAEDX,GAAQ,EACRD,EAAe,MAAM,QAAU,QAE1BG,EAGHA,EAAS,QAAO,EAFhBA,EAAW,IAAIU,EAAe,YAAY,EAKxCJ,EAAK,WAAaR,EAAO,KAC3BD,EAAe,MAAM,QAAU,OAC/BU,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,WACV,gBAAiB,aACjB,MAAO,OACjB,CAAS,EAEJ,OAAQI,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,EAC7CJ,EAAS,KAAK,CACZ,QACE,mEACF,SAAU,WACV,gBAAiB,aACjB,MAAO,OACf,CAAO,CACF,CACF,CACH,CAAC"}